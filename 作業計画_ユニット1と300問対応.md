# 作業計画: ユニット1の新構造化と300問対応

**作成日**: 2025-01-03  
**目的**: ユニット1を新しい構造に変更し、問題演習を300問対応にする

---

## 📋 作業の流れ

### Step 1: 現在の安全な状態をGitに保存 ✅

```bash
# 再発防止対策をコミット（完了済み）
git commit -m "feat: 再発防止対策とチェックスクリプトを追加"
```

### Step 2: 問題演習を300問対応にする

#### 2-1. APIを300問対応に変更
- [ ] `app/api/quiz-questions/route.ts`を`public/app_questions_300.json`から読み込むように変更
- [ ] Phaseチェック: `npm run phase-check 2-1`
- [ ] コミット: `git commit -m "feat: 問題演習APIを300問対応に変更"`

#### 2-2. クイズページに300問オプションを追加
- [ ] `app/quiz/page.tsx`に300問オプションを追加
- [ ] Phaseチェック: `npm run phase-check 2-2`
- [ ] コミット: `git commit -m "feat: クイズページに300問オプションを追加"`

### Step 3: ユニット1を新しい構造に変更

#### 3-1. Phase 1: インポートの追加
- [ ] `HybridContentCard`と`UnitQuizModal`のインポートを追加
- [ ] `loadUnitQuizzes`などのユーティリティ関数のインポートを追加
- [ ] Phaseチェック: `npm run phase-check 3-1`
- [ ] コミット: `git commit -m "Phase 1: ユニット1にインポート追加"`

#### 3-2. Phase 2: データ構造の準備
- [ ] `newChapter1Sections`データを定義
- [ ] Phaseチェック: `npm run phase-check 3-2`
- [ ] コミット: `git commit -m "Phase 2: ユニット1のデータ構造準備"`

#### 3-3. Phase 3: ロジックの追加
- [ ] `useEffect`で`unit_quizzes_all.json`からデータを読み込む
- [ ] Phaseチェック: `npm run phase-check 3-3`
- [ ] コミット: `git commit -m "Phase 3: ユニット1のロジック追加"`

#### 3-4. Phase 4: レンダリングの更新
- [ ] `HybridContentCard`を使用してレンダリング
- [ ] `UnitQuizModal`を統合
- [ ] Phaseチェック: `npm run phase-check 3-4`
- [ ] コミット: `git commit -m "Phase 4: ユニット1のレンダリング更新"`

### Step 4: 最終確認とコミット

- [ ] すべての機能が正常に動作することを確認
- [ ] ビルドが成功することを確認
- [ ] ブラウザで表示が正しいことを確認
- [ ] 最終コミット: `git commit -m "feat: ユニット1の新構造化と300問対応完了"`

---

## 🎯 各ステップの詳細

### Step 2: 問題演習を300問対応にする

#### 変更ファイル
- `app/api/quiz-questions/route.ts`
- `app/quiz/page.tsx`

#### 確認事項
- `public/app_questions_300.json`が存在するか
- 300問のデータが正しく読み込めるか
- クイズページで300問が選択できるか

### Step 3: ユニット1を新しい構造に変更

#### 変更ファイル
- `app/courses/chapter1/page.tsx`

#### 確認事項
- `HybridContentCard`が正しく表示されるか
- `UnitQuizModal`が正しく動作するか
- `unit_quizzes_all.json`からデータが読み込めるか

---

## 🚨 エラーが発生した場合

### 即座に実行

```bash
# 変更を元に戻す
git checkout -- <変更したファイル>

# ビルドキャッシュをクリア
rm -rf .next

# 開発サーバーを再起動
npm run dev
```

---

## ✅ 完了条件

- [ ] 問題演習で300問が選択できる
- [ ] 300問の問題が正しく表示される
- [ ] ユニット1が新しい構造で表示される
- [ ] `HybridContentCard`が正しく表示される
- [ ] `UnitQuizModal`が正しく動作する
- [ ] すべての変更がGitにコミットされている

---

**最終更新**: 2025-01-03  
**状態**: 作業計画作成完了、準備完了

