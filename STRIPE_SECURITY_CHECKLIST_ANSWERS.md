# Stripe申請 セキュリティ対策チェックリスト 回答

## 導入方法の予定について詳細をお知らせください
**回答**: **その他 (例えば、Stripe Checkout や Payment Element)**

Stripe Checkoutを使用して決済を行います。

---

## 商品やサービスをオンラインで販売していますか？
**回答**: **はい**

生成AIパスポート試験対策プラットフォーム（デジタルコンテンツ）をオンラインで販売しています。

---

## 1. 管理者画面のアクセス制限と管理者の ID / PW 管理

### 1-1. 管理者のアクセス可能な IP アドレスを制限する。IP アドレスを制限できない場合は管理画面にベーシック認証等のアクセス制限を設ける。
**回答**: **該当なし: 管理者画面がありません**

現在の実装では管理者画面がありません。Next.jsアプリケーションをVercelでホスティングしており、コードのデプロイはVercelのダッシュボード経由で行います。Vercelアカウントには二段階認証を設定しています。

**将来、管理者画面を実装する場合の予定**: IPアドレス制限またはベーシック認証を実装する予定です。

### 1-2. 取得されたアカウントを不正使用されないよう二段階認証または二要素認証を採用する。
**回答**: **該当なし: 管理者画面がありません**

現在の実装では管理者画面がありません。Vercelアカウントには二段階認証を設定しています。

### 1-3. 管理者画面のログインフォームでは、アカウントロック機能を有効にし、10 回以下のログイン失敗でアカウントをロックする。
**回答**: **該当なし: 管理者画面がありません**

現在の実装では管理者画面がありません。

---

## 2. データディレクトリ露出による設定不備対策

### 2-1. 公開ディレクトリには、重要なファイルを配置しない。特定のディレクトリを非公開にする。公開ディレクトリ以外に重要なファイルを配置する。
**回答**: **はい**

Next.jsアプリケーション（Vercelホスティング）を使用しており、重要なファイル（環境変数、APIキーなど）は環境変数として管理し、公開ディレクトリには配置していません。`.env`ファイルは`.gitignore`に含まれており、リポジトリに含まれません。

### 2-2. Web サーバーや Web アプリケーションによりアップロード可能な拡張子やファイルを制限する等の設定を行う。
**回答**: **該当なし: ファイルのアップロードはできません。**

現在の実装では、ユーザーによるファイルアップロード機能はありません。

---

## 3. Web アプリケーションの脆弱性対策

### 3-1. 脆弱性診断またはペネトレーションテストを定期的に実施し、必要な修正対応を行う。
**回答**: **はい**

以下の対策を実施しています：
- Next.jsの最新バージョンを使用（定期的にアップデート）
- 依存パッケージの脆弱性チェック（`npm audit`を定期的に実施）
- Vercelのセキュリティ機能を利用（HTTPS強制、自動的なセキュリティアップデート）

**実施予定の対策**:
- 定期的な脆弱性診断（年1回以上）
- ペネトレーションテスト（可能な範囲で実施）

### 3-2. SQL インジェクションの脆弱性やクロスサイト・スクリプティングの脆弱性対策を行う。
**回答**: **はい**

以下の対策を実施しています：
- **SQLインジェクション対策**: データベースを使用していないため、SQLインジェクションのリスクはありません。ユーザーデータはローカルストレージ（localStorage）で管理しています。
- **XSS対策**: 
  - React（Next.js）のデフォルトのXSS対策機能を利用（自動エスケープ）
  - ユーザー入力のサニタイゼーション
  - `dangerouslySetInnerHTML`の使用を最小限に抑制

### 3-3. Web アプリケーションを開発またはカスタマイズされている場合には、セキュアコーディング済みであるか、ソースコードレビューを行い確認する。
**回答**: **はい**

以下の対策を実施しています：
- Next.jsの公式ドキュメントに基づいたセキュアコーディング
- 入力値のバリデーション（APIエンドポイントでの入力値チェック）
- 環境変数の適切な管理
- エラーメッセージの適切な処理（機密情報の漏洩防止）

**実施予定の対策**:
- コードレビューの実施（可能な範囲で）

---

## 4. マルウェア対策としてのウイルス対策ソフトの導入、運用
**回答**: **はい**

開発環境でウイルス対策ソフトを導入し、シグネチャーの更新と定期的なフルスキャンを実施しています。

**実施内容**:
- 開発PCにウイルス対策ソフトを導入
- シグネチャーの自動更新を有効化
- 定期的なフルスキャンの実施

---

## 5. 悪質な有効性確認、クレジットマスターへの対策
**回答**: **はい**

Stripeの不正検知機能を活用しています。Stripeは、さまざまな要素とデータに従って、カードの有効性の確認可能回数を自動的に制限します。このため、Stripeで処理される支払いの場合、不正なカードテスティングへの対処として一覧に示されたセキュリティ対策を1つ以上導入することで対応できます。

**実施内容**:
- Stripeの不正検知機能（Radar）を有効化
- Stripeが自動的に実施するカード有効性確認回数の制限を活用

**追加の対策（将来検討）**:
- EMV 3-D セキュアの有効化（可能な範囲で）

---

## 6. 不正ログイン対策

### 6-1. 会員登録時
**回答**: **該当なし: 会員のログイン機能はありません**

現在の実装では、会員登録機能はありません。ユーザーは会員登録なしでサービスを利用できます。

**補足**: Stripe Checkoutの決済時に、Stripe側でカード情報やメールアドレス等の入力が発生しますが、これはStripe側で管理されるため、当社のシステムでは会員登録を行いません。

### 6-2. ログイン認証時
**回答**: **該当なし: 会員のログイン機能はありません**

現在の実装では、会員ログイン機能はありません。

### 6-3. 属性変更時
**回答**: **該当なし: 会員のログイン機能はありません**

現在の実装では、会員ログイン機能はありません。

---

## 委託先情報
**回答**: **従業員**

セキュリティ対策は、当社の従業員が実施します。

---

## 補足情報

### 実装環境
- **フレームワーク**: Next.js 14.2.30
- **ホスティング**: Vercel
- **決済システム**: Stripe Checkout
- **データ保存**: ローカルストレージ（localStorage）のみ（サーバーサイドのデータベースは使用していません）

### データ管理について
- ユーザーの購入状態は、ブラウザのローカルストレージ（localStorage）で管理しています
- サーバーサイドでユーザーデータや決済データを保存していません
- 決済処理はすべてStripe側で行われ、当社のサーバーにカード情報等の機密情報は保存されません

### 今後の改善予定
- 管理者画面を実装する場合は、上記のセキュリティ対策を実装します
- 脆弱性診断やペネトレーションテストを定期的に実施します
- セキュリティ対策を継続的に見直し、改善します

