# デプロイメント設定ファイル - Deployment Configuration
# 学習プラットフォームのデプロイメント設定

deployment_metadata:
  name: "AI Learning Platform Deployment"
  version: "1.0.0"
  environment: "production"
  platform: "vercel"
  
# Vercel設定
vercel_config:
  project_settings:
    framework: "nextjs"
    node_version: "18.x"
    build_command: "npm run build"
    dev_command: "npm run dev"
    install_command: "npm install"
    output_directory: ".next"
    
  environment_variables:
    required:
      - name: "OPENAI_API_KEY"
        description: "OpenAI APIアクセスキー"
        secret: true
        example: "sk-..."
      - name: "NEXT_PUBLIC_APP_URL"
        description: "アプリケーションのベースURL"
        secret: false
        example: "https://your-app.vercel.app"
        
    optional:
      - name: "NEXT_PUBLIC_ENABLE_CHAT"
        description: "チャット機能の有効化フラグ"
        secret: false
        default: "true"
        example: "true"
      - name: "NODE_ENV"
        description: "実行環境"
        secret: false
        default: "production"
        example: "production"
        
  function_config:
    max_duration: 30
    memory: 1024
    runtime: "nodejs18.x"
    
  domain_config:
    production_domains:
      - "your-domain.com"
      - "www.your-domain.com"
    custom_domain: true
    ssl: true
    
# セキュリティ設定
security_config:
  cors:
    allowed_origins:
      - "https://your-domain.com"
      - "https://www.your-domain.com"
      - "${NEXT_PUBLIC_APP_URL}"
    allowed_methods:
      - "GET"
      - "POST"
      - "HEAD"
      - "OPTIONS"
    allowed_headers:
      - "Content-Type"
      - "Authorization"
      - "X-Requested-With"
      
  headers:
    security_headers:
      x_frame_options: "DENY"
      x_content_type_options: "nosniff"
      referrer_policy: "strict-origin-when-cross-origin"
      x_xss_protection: "1; mode=block"
      strict_transport_security: "max-age=31536000; includeSubDomains"
      
  api_protection:
    rate_limiting:
      enabled: true
      requests_per_minute: 60
      requests_per_hour: 1000
      
    input_validation:
      enabled: true
      max_input_length: 4000
      allowed_content_types:
        - "application/json"
        - "text/plain"
        
    bot_protection:
      enabled: true
      user_agent_check: true
      referer_check: true
      
# モニタリング設定
monitoring_config:
  analytics:
    vercel_analytics: true
    web_vitals: true
    
  logging:
    level: "info"
    structured_logging: true
    
  performance:
    core_web_vitals: true
    real_user_monitoring: true
    
  error_tracking:
    enabled: true
    source_maps: true
    
# CDN設定
cdn_config:
  static_assets:
    cache_control: "public, max-age=31536000, immutable"
    compression: true
    
  dynamic_content:
    cache_control: "public, max-age=0, must-revalidate"
    edge_caching: true
    
# データベース設定（将来拡張用）
database_config:
  provider: "none"  # 現在はローカルファイル使用
  future_options:
    - provider: "planetscale"
      type: "mysql"
    - provider: "supabase"
      type: "postgresql"
    - provider: "mongodb"
      type: "nosql"
      
# バックアップ設定
backup_config:
  static_content:
    enabled: true
    retention_days: 30
    
  user_data:
    enabled: false  # 現在はユーザーデータなし
    
  configuration:
    enabled: true
    version_control: "git"
    
# CI/CD設定
cicd_config:
  git_integration:
    provider: "github"
    auto_deploy:
      main_branch: true
      preview_branches: true
      
  build_settings:
    node_version: "18.x"
    package_manager: "npm"
    
  testing:
    enabled: false  # 将来実装
    test_command: "npm test"
    
  quality_checks:
    eslint: true
    typescript_check: true
    build_check: true
    
# 環境別設定
environments:
  development:
    url: "http://localhost:3000"
    debug: true
    hot_reload: true
    
  preview:
    auto_deploy: true
    protection: false
    analytics: false
    
  production:
    custom_domain: true
    protection: true
    analytics: true
    caching: true
    
# スケーリング設定
scaling_config:
  auto_scaling:
    enabled: true
    min_instances: 1
    max_instances: 10
    
  performance_optimization:
    image_optimization: true
    code_splitting: true
    tree_shaking: true
    minification: true
    
# 互換性設定
compatibility_config:
  browsers:
    - "Chrome >= 90"
    - "Firefox >= 88"
    - "Safari >= 14"
    - "Edge >= 90"
    
  devices:
    mobile: true
    tablet: true
    desktop: true
    
# 国際化設定
i18n_config:
  default_locale: "ja"
  supported_locales:
    - "ja"
    - "en"
  domain_strategy: "sub-path"
  
# メンテナンス設定
maintenance_config:
  scheduled_maintenance:
    enabled: false
    maintenance_page: "/maintenance.html"
    
  health_checks:
    enabled: true
    endpoints:
      - "/api/health"
      - "/api/status"
      
# コスト最適化
cost_optimization:
  function_optimization:
    cold_start_reduction: true
    memory_optimization: true
    
  bandwidth_optimization:
    compression: true
    image_optimization: true
    
  edge_caching:
    static_assets: true
    api_responses: false  # 動的コンテンツのため
    
# 法的コンプライアンス
compliance_config:
  gdpr:
    enabled: true
    cookie_consent: true
    
  accessibility:
    wcag_level: "AA"
    screen_reader_support: true
    
  data_retention:
    logs: 30  # 日数
    analytics: 90  # 日数
    
# ドキュメント設定
documentation_config:
  api_docs:
    enabled: false  # 将来実装
    format: "openapi"
    
  deployment_guide:
    enabled: true
    location: "README.md"
    
  environment_setup:
    enabled: true
    location: "docs/setup.md"